# 📧 إعداد Gmail للموقع

## ✅ تم التبديل إلى Gmail!

Gmail أكثر موثوقية وأسهل في الإعداد من Outlook.

---

## 🔐 الخطوة 1: إنشاء App Password

**Gmail يتطلب App Password (وليس الباسورد العادي) للتطبيقات الخارجية.**

### **الطريقة:**

**1. افتح Google Account Security:**
```
https://myaccount.google.com/security
```

**2. فعّل Two-Factor Authentication (إذا لم يكن مفعلاً):**
- اضغط `2-Step Verification`
- اتبع الخطوات
- استخدم رقم هاتفك

**3. أنشئ App Password:**
- ارجع إلى: https://myaccount.google.com/security
- اضغط `2-Step Verification`
- انزل للأسفل → اضغط `App passwords`
- اختر:
  - App: `Mail`
  - Device: `Other (Custom name)`
  - اكتب: `Gov Services Portal`
- اضغط `Generate`

**4. انسخ الباسورد:**
```
مثال: abcd efgh ijkl mnop
```
⚠️ **مهم جداً:** احفظه فوراً - لن يظهر مرة أخرى!

---

## ⚙️ الخطوة 2: إضافة المتغيرات في Railway

### **1. افتح Railway Dashboard:**
```
https://railway.app
```

### **2. اختر المشروع → Variables**

### **3. أضف المتغيرات الثلاثة:**

**المتغير الأول:**
```
Name: EMAIL_HOST_USER
Value: albuhairah.test@gmail.com
```
اضغط `Add`

**المتغير الثاني:**
```
Name: EMAIL_HOST_PASSWORD
Value: [App Password اللي حصلت عليه]
مثال: abcdefghijklmnop (بدون فراغات!)
```
اضغط `Add`

**المتغير الثالث:**
```
Name: DEFAULT_FROM_EMAIL
Value: albuhairah.test@gmail.com
```
اضغط `Add`

---

## ⏰ الخطوة 3: الانتظار

**Railway سيعيد النشر تلقائياً:**
- ⏱️ انتظر 1-2 دقيقة
- ✅ سيتم تطبيق الإعدادات

---

## 🧪 الخطوة 4: الاختبار

### **1. قدم استعلام جديد:**
- افتح: https://[your-site].up.railway.app/check-report-status/
- اعبي النموذج
- استخدم **إيميلك الشخصي** للاختبار
- اضغط إرسال

### **2. ارد من صفحة الموظفين:**
- افتح: https://[your-site].up.railway.app/staff/login/
- سجل دخول: `admin` / `admin123`
- افتح الاستعلام
- اكتب رد
- اضغط "إرسال الرد"

### **3. تفقد إيميلك:**
- افتح إيميلك الشخصي
- تفقد Inbox
- إذا لم يصل → تفقد Spam/Junk
- ⏱️ قد يأخذ 5-30 ثانية

### **4. تفقد Railway Logs:**
```
Railway → Deployments → View Logs
```

**ابحث عن:**
```
✅ نجح إرسال البريد للاستعلام INQ-XXXXXX إلى your-email@example.com
```

---

## 🐛 حل المشاكل

### **المشكلة 1: "Authentication failed"**

**السبب:** App Password غير صحيح

**الحل:**
1. تأكد أنك نسخت App Password كامل (16 حرف)
2. أزل أي فراغات
3. جربه مرة أخرى في Railway Variables

---

### **المشكلة 2: "Network unreachable"**

**السبب:** المتغيرات غير موجودة

**الحل:**
1. تأكد من إضافة المتغيرات الثلاثة
2. انتظر إعادة النشر
3. جرب مرة أخرى

---

### **المشكلة 3: الإيميل لم يصل**

**الحل:**
1. تفقد مجلد Spam/Junk
2. تفقد Railway Logs للأخطاء
3. تأكد من صحة الإيميل المُدخل

---

### **المشكلة 4: "Less secure app access"**

**هذا لن يحدث مع App Password!**

App Password مصمم خصيصاً للتطبيقات الخارجية وآمن تماماً.

---

## ✅ المزايا مقارنة بـ Outlook

| الميزة | Gmail | Outlook |
|--------|-------|---------|
| الموثوقية | ✅ ممتاز | ⚠️ متوسط |
| السرعة | ✅ سريع | ⚠️ بطيء أحياناً |
| التوافق مع Railway | ✅ 100% | ⚠️ 70% |
| سهولة الإعداد | ✅ سهل | ⚠️ معقد |
| App Password | ✅ واضح | ⚠️ مربك |
| الاستقرار | ✅ مستقر | ⚠️ قد يفشل |

---

## 🔒 ملاحظات أمنية

### **✅ آمن:**
- App Password مخصص للتطبيقات
- يمكن إلغاؤه في أي وقت بدون تغيير باسوردك الأساسي
- لا يعطي وصول كامل لحسابك

### **⚠️ مهم:**
- لا تشارك App Password مع أحد
- احفظه في مكان آمن
- غيره كل 6 أشهر (اختياري)

---

## 📊 متابعة الإيميلات

### **في Railway Logs:**

**✅ نجح:**
```
✅ نجح إرسال البريد للاستعلام INQ-000XXX
```

**⚠️ فشل:**
```
❌ خطأ في إرسال البريد: [السبب]
```

**⏱️ Timeout:**
```
⏱️ انتهت مهلة إرسال البريد (timeout 10s)
```

---

## 🎯 الخلاصة

**بعد الإعداد:**
1. ✅ الموقع سريع ومستقر
2. ✅ الإيميلات تُرسل تلقائياً
3. ✅ تصل خلال 5-30 ثانية
4. ✅ لا مشاكل، لا أخطاء

**الوقت الإجمالي للإعداد: 5 دقائق فقط!**

---

© 2025 - دليل إعداد Gmail

